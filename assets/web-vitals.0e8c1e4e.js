var m,d,w,h,f=function(n,e){return{name:n,value:e===void 0?-1:e,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},T=function(n,e){try{if(PerformanceObserver.supportedEntryTypes.includes(n)){if(n==="first-input"&&!("PerformanceEventTiming"in self))return;var i=new PerformanceObserver(function(r){return r.getEntries().map(e)});return i.observe({type:n,buffered:!0}),i}}catch(r){}},y=function(n,e){var i=function r(t){t.type!=="pagehide"&&document.visibilityState!=="hidden"||(n(t),e&&(removeEventListener("visibilitychange",r,!0),removeEventListener("pagehide",r,!0)))};addEventListener("visibilitychange",i,!0),addEventListener("pagehide",i,!0)},p=function(n){addEventListener("pageshow",function(e){e.persisted&&n(e)},!0)},v=function(n,e,i){var r;return function(t){e.value>=0&&(t||i)&&(e.delta=e.value-(r||0),(e.delta||r===void 0)&&(r=e.value,n(e)))}},l=-1,F=function(){return document.visibilityState==="hidden"?0:1/0},b=function(){y(function(n){var e=n.timeStamp;l=e},!0)},E=function(){return l<0&&(l=F(),b(),p(function(){setTimeout(function(){l=F(),b()},0)})),{get firstHiddenTime(){return l}}},A=function(n,e){var i,r=E(),t=f("FCP"),o=function(c){c.name==="first-contentful-paint"&&(u&&u.disconnect(),c.startTime<r.firstHiddenTime&&(t.value=c.startTime,t.entries.push(c),i(!0)))},a=performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],u=a?null:T("paint",o);(a||u)&&(i=v(n,t,e),a&&o(a),p(function(c){t=f("FCP"),i=v(n,t,e),requestAnimationFrame(function(){requestAnimationFrame(function(){t.value=performance.now()-c.timeStamp,i(!0)})})}))},P=!1,S=-1,R=function(n,e){P||(A(function(s){S=s.value}),P=!0);var i,r=function(s){S>-1&&n(s)},t=f("CLS",0),o=0,a=[],u=function(s){if(!s.hadRecentInput){var B=a[0],q=a[a.length-1];o&&s.startTime-q.startTime<1e3&&s.startTime-B.startTime<5e3?(o+=s.value,a.push(s)):(o=s.value,a=[s]),o>t.value&&(t.value=o,t.entries=a,i())}},c=T("layout-shift",u);c&&(i=v(r,t,e),y(function(){c.takeRecords().map(u),i(!0)}),p(function(){o=0,S=-1,t=f("CLS",0),i=v(r,t,e)}))},g={passive:!0,capture:!0},H=new Date,C=function(n,e){m||(m=e,d=n,w=new Date,k(removeEventListener),D())},D=function(){if(d>=0&&d<w-H){var n={entryType:"first-input",name:m.type,target:m.target,cancelable:m.cancelable,startTime:m.timeStamp,processingStart:m.timeStamp+d};h.forEach(function(e){e(n)}),h=[]}},I=function(n){if(n.cancelable){var e=(n.timeStamp>1e12?new Date:performance.now())-n.timeStamp;n.type=="pointerdown"?function(i,r){var t=function(){C(i,r),a()},o=function(){a()},a=function(){removeEventListener("pointerup",t,g),removeEventListener("pointercancel",o,g)};addEventListener("pointerup",t,g),addEventListener("pointercancel",o,g)}(e,n):C(e,n)}},k=function(n){["mousedown","keydown","touchstart","pointerdown"].forEach(function(e){return n(e,I,g)})},M=function(n,e){var i,r=E(),t=f("FID"),o=function(u){u.startTime<r.firstHiddenTime&&(t.value=u.processingStart-u.startTime,t.entries.push(u),i(!0))},a=T("first-input",o);i=v(n,t,e),a&&y(function(){a.takeRecords().map(o),a.disconnect()},!0),a&&p(function(){var u;t=f("FID"),i=v(n,t,e),h=[],d=-1,m=null,k(addEventListener),u=o,h.push(u),D()})},L=new Set,N=function(n,e){var i,r=E(),t=f("LCP"),o=function(c){var s=c.startTime;s<r.firstHiddenTime&&(t.value=s,t.entries.push(c)),i()},a=T("largest-contentful-paint",o);if(a){i=v(n,t,e);var u=function(){L.has(t.id)||(a.takeRecords().map(o),a.disconnect(),L.add(t.id),i(!0))};["keydown","click"].forEach(function(c){addEventListener(c,u,{once:!0,capture:!0})}),y(u,!0),p(function(c){t=f("LCP"),i=v(n,t,e),requestAnimationFrame(function(){requestAnimationFrame(function(){t.value=performance.now()-c.timeStamp,L.add(t.id),i(!0)})})})}},O=function(n){var e,i=f("TTFB");e=function(){try{var r=performance.getEntriesByType("navigation")[0]||function(){var t=performance.timing,o={entryType:"navigation",startTime:0};for(var a in t)a!=="navigationStart"&&a!=="toJSON"&&(o[a]=Math.max(t[a]-t.navigationStart,0));return o}();if(i.value=i.delta=r.responseStart,i.value<0)return;i.entries=[r],n(i)}catch(t){}},document.readyState==="complete"?setTimeout(e,0):addEventListener("pageshow",e)};export{R as getCLS,A as getFCP,M as getFID,N as getLCP,O as getTTFB};
